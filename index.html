<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Subojit's YouTube Clone</title>
<style>
* { box-sizing: border-box; margin: 0; padding: 0; font-family: Arial, sans-serif; }
body { background-color: #f9f9f9; }

/* Navbar */
#navbar {
  display: flex;
  align-items: center;
  padding: 10px 20px;
  height: 80px;
  background-color: white;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}
#logo {
  width: 120px;
  cursor: pointer;
}
#search-container {
  flex: 1;
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
}
#query {
  width: 400px;
  padding: 8px 12px;
  font-size: 16px;
  border: 1px solid #ccc;
  border-radius: 2px 0 0 2px;
  outline: none;
}
#search-btn {
  padding: 8px 16px;
  border: 1px solid #ccc;
  border-left: none;
  background-color: #eee;
  cursor: pointer;
  border-radius: 0 2px 2px 0;
}

/* Suggestions dropdown */
#suggestions {
  position: absolute;
  top: 42px;
  width: 400px;
  background: white;
  border: 1px solid #ccc;
  border-top: none;
  max-height: 200px;
  overflow-y: auto;
  z-index: 10;
  display: none;
}
#suggestions div {
  padding: 8px 10px;
  cursor: pointer;
}
#suggestions div:hover {
  background-color: #eee;
}

/* Video grid */
#cont {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 20px;
  padding: 20px;
}
.video {
  background-color: white;
  border-radius: 5px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  overflow: hidden;
  cursor: pointer;
  transition: transform 0.2s;
}
.video:hover { transform: scale(1.03); }
.video img { width: 100%; display: block; }
.video h3 { padding: 10px; font-size: 16px; color: #333; }
</style>
</head>
<body>

<div id="navbar">
  <img id="logo" src="https://upload.wikimedia.org/wikipedia/commons/b/b8/YouTube_Logo_2017.svg" alt="Logo">
  <div id="search-container">
    <input type="text" id="query" placeholder="Search YouTube" autocomplete="off">
    <button id="search-btn">Search</button>
    <div id="suggestions"></div>
  </div>
</div>

<div id="cont"></div>

<script>
const API_KEY = "AIzaSyAw_puocDugCcHM8P_4CHpDO55QCGcqUe4";
let currentQuery = "";

// Get videos from API
async function getData(query) {
  const url = `https://youtube.googleapis.com/youtube/v3/search?part=snippet&maxResults=20&q=${query}&key=${API_KEY}`;
  const res = await fetch(url);
  const data = await res.json();
  return data.items;
}

// Append videos to grid
function appendVideos(videos) {
  const container = document.getElementById("cont");
  container.innerHTML = "";
  videos.forEach(item => {
    const videoId = item.id.videoId || item.id.playlistId;
    const title = item.snippet.title;
    const thumbUrl = item.snippet.thumbnails.medium.url;

    const div = document.createElement("div");
    div.className = "video";
    div.onclick = () => saveVideo(videoId);

    const img = document.createElement("img");
    img.src = thumbUrl;

    const h3 = document.createElement("h3");
    h3.innerText = title;

    div.append(img, h3);
    container.append(div);
  });
}

// Save clicked video ID and redirect
function saveVideo(id) {
  localStorage.setItem("video", JSON.stringify(id));
  window.location.href = "video.html"; // Ensure this page exists
}

// Search function
async function search() {
  const query = document.getElementById("query").value.trim();
  if (!query) return;
  currentQuery = query;
  hideSuggestions();
  const data = await getData(query);
  appendVideos(data);
}

// Default load
async function loadDefault() {
  const data = await getData("latest songs bollywood");
  appendVideos(data);
}

// --- Suggestions feature ---
const input = document.getElementById("query");
const suggestionsBox = document.getElementById("suggestions");

input.addEventListener("keydown", (e) => {     // <-- Step 2
  if (e.key === "Enter") {
    e.preventDefault();
    search();
    hideSuggestions();
  }
});

input.addEventListener("input", async () => {
  const q = input.value.trim();
  if (!q) {
    hideSuggestions();
    return;
  }
  const items = await getData(q);
  showSuggestions(items);
});

function showSuggestions(items) {
  suggestionsBox.innerHTML = "";
  items.slice(0, 5).forEach(item => {
    const div = document.createElement("div");
    div.innerText = item.snippet.title;
    div.onclick = () => {
      input.value = item.snippet.title;
      hideSuggestions();
      search();
    };
    suggestionsBox.appendChild(div);
  });
  suggestionsBox.style.display = "block";
}

function hideSuggestions() {
  suggestionsBox.innerHTML = "";
  suggestionsBox.style.display = "none";
}

// Event listeners
document.getElementById("logo").addEventListener("click", loadDefault);
document.getElementById("search-btn").addEventListener("click", search);

// Click outside to hide suggestions
document.addEventListener("click", (e) => {
  if (!document.getElementById("search-container").contains(e.target)) {
    hideSuggestions();
  }
});

// Initial load
loadDefault();
</script>

</body>
</html>
